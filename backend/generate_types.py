# main.py
from py2ts import generate_ts
from py2ts.data import TSInterface

from beets_flask.importer.states import (
    SerializedSessionState,
)
from beets_flask.server.routes.inbox2 import Folder
from beets_flask.server.routes.tag import FolderStatusResponse

prefix = """/* 
 * This file is generated by ../backend/generate_types.py
 * Do not edit this file manually!
 */
"""

with open("../frontend/src/pythonTypes.ts", "w") as f:
    f.write(prefix)

    ts_session = generate_ts(SerializedSessionState)
    assert isinstance(ts_session, TSInterface)
    f.write(ts_session.full_str())
    f.write("\n")
    ts_folder = generate_ts(Folder)
    assert isinstance(ts_folder, TSInterface)
    f.write(ts_folder.full_str())
    f.write("\n")
    ts_folder = generate_ts(FolderStatusResponse)
    assert isinstance(ts_folder, TSInterface)
    f.write(ts_folder.full_str())

print("Typescript types generated successfully!")
